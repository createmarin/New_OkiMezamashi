<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>å•é¡Œã‚’è§£ã‹ãªã„ã¨æ­¢ã¾ã‚‰ãªã„ç›®è¦šã¾ã—æ™‚è¨ˆ</title>
  <style>
    body {
      text-align: center;
      background: #f5f5f5;
      font-family: "Segoe UI", sans-serif;
      padding: 30px;
    }
    h1 {
      font-size: 2.5em;
    }
    #time {
      font-size: 2em;
      margin-bottom: 10px;
    }
    input, select, button {
      font-size: 1em;
      margin: 5px;
      padding: 5px 10px;
    }
    #questionArea {
      margin-top: 20px;
      font-size: 1.2em;
      display: none;
    }
  </style>
</head>
<body>
  <h1>ğŸ•’ å•é¡Œã‚’è§£ã‹ãªã„ã¨æ­¢ã¾ã‚‰ãªã„ç›®è¦šã¾ã—</h1>
  <div id="time"></div>

  <div>
    <input type="time" id="alarmTime" />
    <input type="file" id="alarmSound" accept="audio/*" />
    <button id="setAlarm">ã‚¢ãƒ©ãƒ¼ãƒ è¨­å®š</button>
  </div>

  <div id="status"></div>

  <div id="questionArea">
    <div id="questionText"></div>
    <input type="text" id="answerInput" placeholder="ç­”ãˆã‚’å…¥åŠ›" />
    <button id="submitAnswer">å›ç­”</button>
    <div id="result"></div>
  </div>

  <script>
    const timeEl = document.getElementById("time");
    const statusEl = document.getElementById("status");
    const questionArea = document.getElementById("questionArea");
    const questionText = document.getElementById("questionText");
    const resultEl = document.getElementById("result");
    const answerInput = document.getElementById("answerInput");
    const submitAnswer = document.getElementById("submitAnswer");

    let alarmTime = null;
    let alarmAudio = null;
    let alarmInterval;
    let questionIndex = 0;
    let correctCount = 0;

    function updateTime() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2, "0");
      const m = String(now.getMinutes()).padStart(2, "0");
      const s = String(now.getSeconds()).padStart(2, "0");
      timeEl.textContent = `${h}:${m}:${s}`;
      if (alarmTime && `${h}:${m}` === alarmTime) {
        startAlarm();
        alarmTime = null;
      }
    }
    setInterval(updateTime, 1000);

    document.getElementById("setAlarm").onclick = () => {
      const file = document.getElementById("alarmSound").files[0];
      const t = document.getElementById("alarmTime").value;
      if (!t || !file) {
        alert("ã‚¢ãƒ©ãƒ¼ãƒ æ™‚åˆ»ã¨éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼");
        return;
      }
      alarmTime = t;
      alarmAudio = new Audio(URL.createObjectURL(file));
      statusEl.textContent = `â° ã‚¢ãƒ©ãƒ¼ãƒ è¨­å®šä¸­: ${t} ã«é³´ã‚Šã¾ã™`;
    };

    function startAlarm() {
      statusEl.textContent = "ğŸ”” ã‚¢ãƒ©ãƒ¼ãƒ ç™ºå‹•ä¸­ï¼3å•æ­£è§£ã§åœæ­¢ã—ã¾ã™";
      alarmAudio.loop = true;
      alarmAudio.play();
      showQuestion();
    }

    function stopAlarm() {
      alarmAudio.pause();
      alarmAudio.currentTime = 0;
      questionArea.style.display = "none";
      statusEl.textContent = "âœ… ã‚¢ãƒ©ãƒ¼ãƒ åœæ­¢ï¼ãŠã¯ã‚ˆã†ï¼";
    }

    function showQuestion() {
      questionArea.style.display = "block";
      const today = new Date().getDay();
      const q = getQuestion(today);
      questionText.textContent = `Q${questionIndex + 1}: ${q.question}`;
      questionText.dataset.answer = q.answer;
      resultEl.textContent = "";
      answerInput.value = "";
      answerInput.focus();
    }

    submitAnswer.onclick = () => {
      const userAnswer = answerInput.value.trim();
      const correct = questionText.dataset.answer;
      if (userAnswer === correct) {
        correctCount++;
        resultEl.textContent = "â­• æ­£è§£ï¼";
        questionIndex++;
        if (correctCount >= 3) {
          stopAlarm();
        } else {
          showQuestion();
        }
      } else {
        resultEl.textContent = `âŒ ä¸æ­£è§£ï¼æ­£è§£ã¯ã€Œ${correct}ã€ã§ã—ãŸ`;
        questionIndex++;
        showQuestion();
      }
    };

    function getQuestion(day) {
      const rand = (arr) => arr[Math.floor(Math.random() * arr.length)];

      switch (day) {
        case 1: // æœˆæ›œï¼šå›½èª
          return rand([
            { question: "ã€Œä¸€çŸ³äºŒé³¥ã€ã®æ„å‘³ã¯ï¼Ÿ", answer: "ä¸€åº¦ã§äºŒã¤ã®åˆ©ç›Š" },
            { question: "ã€ŒçŸ›ç›¾ã€ã®æ„å‘³ã¯ï¼Ÿ", answer: "è¾»è¤„ãŒåˆã‚ãªã„ã“ã¨" },
            { question: "çˆ¶ã«å±ã€Œã‚‰ã‚Œã‚‹ã€ã®å“è©ã¯ï¼Ÿ", answer: "å—ã‘èº«" },
            { question: "ç–¾ã‚’ä½¿ã†ã®ã¯ã©ã‚Œï¼Ÿã€€ã—ã£ã“ãã€€ã—ã£ã›ãã€€ã—ã£ãºã„ã€€ã—ã£ã‘ã„ã€€ã—ã£ã¨", answer: "ã—ã£ãºã„" },
          ]);
        case 2: // ç«æ›œï¼šæ•°å­¦ï¼ˆä¸­2ãƒ¬ãƒ™ãƒ«ï¼‰
          const a = Math.floor(Math.random() * 20) + 1;
          const b = Math.floor(Math.random() * 20) + 1;
          return { question: `${a}Ã—${b} = ?`, answer: String(a * b) };
        case 3: // æ°´æ›œï¼šè‹±èª
          return rand([
            { question: "ã€Œèµ°ã‚‹ã€ã‚’è‹±èªã§ï¼Ÿ", answer: "run" },
            { question: "ã€Œç¾ã—ã„ã€ã®è‹±èªã¯ï¼Ÿ", answer: "beautiful" },
            { question: "å‹•è©ã¯ã©ã‚Œ?ã€€Funny Look Stage", answer: "Look" },
            { question: "ç¾åœ¨å®Œäº†é€²è¡Œå½¢ã¯ã©ã‚Œï¼Ÿã€€I have been living in Tokyo for five years. I have lived in Tokyo for five years.", answer: "I have been living in Tokyo for five years." },
          ]);
        case 4: // æœ¨æ›œï¼šç†ç§‘
          return rand([
            { question: "æ°´ã®åŒ–å­¦å¼ã¯ï¼Ÿ", answer: "H2O" },
            { question: "é…¸ç´ ã®åŒ–å­¦å¼ã¯ï¼Ÿ", answer: "O2" },
            { question: "é…¸ç´ ã¨åŒ–åˆã—ãŸç‰©è³ªã‹ã‚‰é…¸ç´ ã‚’å¥ªã„å–ã‚‹ã‚ˆã†ãªåŒ–å­¦å¤‰åŒ–ã‚’ä½•ã¨ã„ã†?", answer: "é‚„å…ƒ" },
            { question: "åŒ–å­¦å¤‰åŒ–ãŒé€²ã‚€ã¨ãã«ç†±ã®ç™ºã™ã‚‹åå¿œã‚’ç™ºç†±åå¿œã¨ã„ã†ãŒã€åå¯¾ã«ç†±ã‚’å¸åã™ã‚‹åå¿œã‚’ä½•ã¨ã„ã†ï¼Ÿ", answer: "å¸ç†±åå¿œ" },
          ]);
        case 5: // é‡‘æ›œï¼šç¤¾ä¼š
          return rand([
            { question: "æ—¥æœ¬ã®é¦–éƒ½ã¯ï¼Ÿ", answer: "æ±äº¬" },
            { question: "æ˜æ²»ç¶­æ–°ãŒèµ·ã“ã£ãŸå¹´ã¯ï¼Ÿ", answer: "1868" },
            { question: "ä¸­å›½ã®è‡ªå‹•è»Šé“ã¯ä¸­å›½è‡ªå‹•è»Šé“ã¨ä½•ï¼Ÿ", answer: "å±±é™½è‡ªå‹•è»Šé“" },
            { question: "é–¢ç¨è‡ªä¸»æ¨©ã‚’å®Œå…¨ã«å›å¾©ã—ãŸã®ã¯èª°ï¼Ÿ", answer: "å°æ‘å¯¿å¤ªéƒ" },
          ]);
        case 6: // åœŸæ›œï¼šå‰¯æ•™ç§‘
          return rand([
            { question: "ãƒ”ã‚¢ãƒã®éµç›¤ã¯ä½•è‰²ï¼Ÿ", answer: "ç™½ã¨é»’" },
            { question: "èµ¤ã¨é’ã‚’æ··ãœã‚‹ã¨ä½•è‰²ï¼Ÿ", answer: "ç´«" },
            { question: "ãƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼ãŒæŒ‡ç¤ºã‚’ã—ã¦ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãŒãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãå½¢å¼ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ä½•ã¨ã„ã†ï¼Ÿ", answer: "ãƒ¢ãƒ–ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°" },
            { question: "ãƒãƒ³ãƒãƒ¼ã‚°ã§ç‰›ä¹³ã‚’å…¥ã‚Œã‚‹ã®ã¯ãªãœ?", answer: "è‚‰ã®ãã•ã¿æ¶ˆã—" },
          ]);
        case 0: // æ—¥æ›œï¼šãã®ä»–
          return rand([
            { question: "ã€€OIVã®æ­£å¼åç§°ã¯ï¼Ÿ", answer: "å¤§æƒ…å ±ãƒãƒ©ã‚¨ãƒ†ã‚£nextstage" },
            { question: "1é€±é–“ã¯ä½•æ—¥ï¼Ÿ", answer: "7" },
            { question: "æœæ´»Liveã®25å¹´10æœˆã‹ã‚‰ã®ãƒ†ãƒ¼ãƒæ›²ã¯ï¼Ÿ", answer: "å¤¢ã®ç‹­é–“" },
            { question: "ã‚¦ã‚§ã‚¤ã‚­ãƒ³ã‚°ãƒãƒƒãƒ‰ã‚¬ãƒ¼ãƒ«ã®MVã‚¤ãƒ©ã‚¹ãƒˆæ‹…å½“ã¯ã˜ã‚‡ãƒ¼ã™ã‘ã•ã‚“ã§ã™ãŒã€ãƒã‚¸ãƒ†ã‚£ãƒ–æ˜Ÿäººã®MVã‚¤ãƒ©ã‚¹ãƒˆã¯èª°?", answer: "æœæœ¬" },
            { question: "å¹¸ã›ã§ã™ã‹ã€€ãŠå…ƒæ°—ã§ã™ã‹ã€€ã‚†ãŸã‹ãªæš®ã‚‰ã—ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã€€èª°ã‹ã‚‰ã®ã”ã‚ã„ã•ã¤ï¼Ÿ", answer: "ã‚ªãƒ¼ã‚¯ãƒ¯" },
            { question: "æ··è‰²ã‚«ãƒ¼ãƒ‰ã«ã‹ã‹ã‚Œã¦ã„ã‚‹æ¬§æ–‡ã®ã†ã¡ã€ä¸€ç•ªçŸ­ã„ã®ã¯ï¼Ÿ", answer: "ArTec" },
          ]);
      }
    }
  </script>
</body>
</html>
